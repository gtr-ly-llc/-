<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nt.mapper.UserMapper">
	<select id="existUser" parameterType="User" resultType="User">
        select * from t_user where useremail=#{useremail} 
    </select>
	<insert id="register" parameterType="User">
		insert into t_user(useremail,userpwd) values (#{useremail},#{userpwd})
	</insert>
    <select id="login" parameterType="User" resultType="User">
        select * from t_user where useremail=#{useremail} and userpwd=#{userpwd}
    </select>
    <select id="salesRanking" resultType="Goods">
        select a.goodsid,goodsname,goodsoriginal,goodscurrent,goodspicture
		from t_goods a 
		left join 
		(select goodsid,sum(buynumber) num 
		from t_order_details 
		group by goodsid) b 
		on a.goodsid=b.goodsid 
		order by b.num 
		desc limit 0,10
    </select>
    <select id="popularRanking" resultType="Goods">
        select a.goodsid,goodsname,goodsoriginal,goodscurrent,goodspicture
		from t_goods a 
		left join 
		(select goodsid,count(followid) num 
		from t_follow
		group by goodsid) b 
		on a.goodsid=b.goodsid 
		order by b.num 
		desc limit 0,10
    </select>
    <select id="newProduct" resultType="Goods">
        select goodsid,goodsname,goodsoriginal,goodscurrent,goodspicture 
        from t_goods 
        order by goodsid 
        desc limit 0,8
    </select>
</mapper>